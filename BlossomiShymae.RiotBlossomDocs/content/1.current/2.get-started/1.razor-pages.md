---
title: "Razor Pages"
description: ""
---

# Tutorial: Get started using RiotBlossom with ASP.NET Razor Pages

This razor-sharp tutorial will show you how to install RiotBlossom and make a request to the Riot Games API with ASP.NET Razor Pages!

You will learn how to:
- Create an ASP.NET Razor Pages project
- Setup RiotBlossom
- Dealing with Razor Pages
- Fetch data from `summoner-v4`
- Run the app

## Prerequisites

- .NET 8.0 SDK
- ASP.NET web development workloads
- Riot Games Development API key
- [Riot Games Developer Policies](https://developer.riotgames.com/policies/general)
- [Riot Games Developer Portal Documentation](https://developer.riotgames.com/docs/portal)

## Create a ASP.NET Razor Pages project

Open your preferred shell and enter the following command:

```bash
dotnet new razor
```

This command will create source files within the current directory.

## Setup RiotBlossom

We will first need to install RiotBlossom from nuget.org, an online NuGet package repository for .NET apps.

```bash
dotnet add package BlossomiShymae.RiotBlossom
```

With the package added, make the following code to look like this in `Program.cs`:

```csharp
using BlossomiShymae.RiotBlossom.Client;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
builder.Services.AddRazorPages();

builder.Services.AddSingleton(config => RiotBlossomClient.Create());
```

We will need to inject the RiotBlossom client as a singleton for rate limiting to work properly.

## Dealing with Razor Pages

Razor Pages is a server-side, page-focused framework that enables building dynamic data-driven websites. We recommend reading the helpful resource, [Learn Razor Pages](https://www.learnrazorpages.com/), for those who like to build websites using it.

Edit `Pages/Index.cshtml` and `Pages/Index.cshtml.cs` to be similar to this:

```csharp
@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<form class="d-flex flex-column justify-content-center align-items-center gap-3" asp-page="Index" method="post">
    <h2>Summoner Search</h2>
    <div class="input-group">
    <input type="text" class="form-control" placeholder="Summoner name" name="name">
    <button class="btn btn-outline-secondary" type="submit">Search</button>
    </div>
    <div>
        <fieldset class="d-flex gap-3 flex-wrap justify-content-between align-items-center">
            @foreach (var shard in @Model.Shards)
            {
                <input type="radio" class="btn-check" name="shard" value="@shard.Value" id="@shard.Value" autocomplete="off"/>
                <label class="btn btn-secondary" for="@shard.Value">@shard.Realm.ToUpper()</label>
            }
        </fieldset>
    </div>
</form>
```

```csharp
using BlossomiShymae.RiotBlossom.Data.Constants.Shards;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;

namespace BlossomiShymae.RazorPages.Pages;

public class IndexModel : PageModel
{
    private readonly ILogger<IndexModel> _logger;

    public IndexModel(ILogger<IndexModel> logger)
    {
        _logger = logger;
    }

    public List<LeagueShard> Shards = 
    [
        LeagueShard.NA1, LeagueShard.BR1, LeagueShard.LA1, LeagueShard.LA2,
        LeagueShard.EUW1, LeagueShard.EUN1, LeagueShard.TR1, LeagueShard.RU,
        LeagueShard.KR, LeagueShard.JP1,
        LeagueShard.OC1, LeagueShard.VN2, LeagueShard.SG2, LeagueShard.TH2, LeagueShard.PH2, LeagueShard.TW2
    ];

    public void OnGet()
    {

    }

    [BindProperty]
    public string? Name { get; set; }

    [BindProperty]
    public string? Shard { get; set; }

    public IActionResult OnPost()
    {
        return RedirectToPage("Summoners", new { Name, Shard });
    }
}

```

This will render a summoner search home page that we can use, but it doesn't work yet!

Now we will need to create a new scaffolded Razor Page, `Summoners.cshtml` and `Summoners.cshtml.cs`:

```csharp
@page "{name}/{shard}"
@model BlossomiShymae.RazorPages.Pages.Summoners
@{
    ViewData["Title"] = "Summoner";
}

<h2>@ViewData["Title"]</h2>

<div class="card mb-3" style="max-width: 540px;">
  <div class="row g-0">
    <div class="col-md-4">
      <img src="@Model.ProfileIcon" class="img-fluid rounded-start">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">@Model.MySummoner.Name</h5>
        <p class="card-text">Level: @Model.MySummoner.SummonerLevel</p>
      </div>
    </div>
  </div>
</div>
```

```csharp
using BlossomiShymae.RiotBlossom.Client;
using BlossomiShymae.RiotBlossom.Data.Constants.Shards;
using BlossomiShymae.RiotBlossom.Data.Dtos.Lol.Summoner;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;

namespace BlossomiShymae.RazorPages.Pages
{
    public class Summoners : PageModel
    {
        private readonly ILogger<Summoners> _logger;
        private readonly IRiotBlossomClient _client;

        public Summoners(ILogger<Summoners> logger, IRiotBlossomClient client)
        {
            _logger = logger;
            _client = client;
        }

        [BindProperty(SupportsGet = true)]
        public string? Name { get; set; }

        [BindProperty(SupportsGet = true)]
        public string? Shard { get; set; }

        public SummonerDto? MySummoner { get; set; }
        
        public string? ProfileIcon { get; set; }

        public async Task<IActionResult> OnGetAsync()
        {
            if (!ModelState.IsValid)
                return Redirect("Index");

            var shard = LeagueShard.GetFromValue(Shard.ToUpper());
            var summoner = await _client.SummonerV4.GetByNameAsync(shard, Name);
            MySummoner = summoner;
            ProfileIcon = _client.CommunityDragon.GetProfileIconById(summoner.ProfileIconId);

            return Page();
        }
    }
}
```

Whewie! Now let us try to run the server:

```bash
dotnet run
```

Open the local server address to see a web page similar to this:

![summoners-page](/img/razor-pages-index.png)

Go ahead and enter `GGoE DarkIntaqt`, select `EUW`, and click search!

![summoners-page](/img/razor-pages-summoner.png)

You just learned how to use RiotBlossom in an ASP.NET Razor Pages app!

